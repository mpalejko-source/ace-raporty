<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ACE â€“ Poranny Skan Rynku</title>

  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <style>
    :root{
      --bg:#0b1220;
      --card:#0f1a33;
      --border:rgba(255,255,255,.10);
      --text:#eaf0ff;
      --muted:rgba(234,240,255,.72);
      --muted2:rgba(234,240,255,.55);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
      --accent:#7dd3fc;
      --accent2:#a78bfa;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Arial, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: radial-gradient(1200px 600px at 10% 0%, rgba(125,211,252,.14), transparent 60%),
                  radial-gradient(900px 500px at 90% 10%, rgba(167,139,250,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    .wrap{max-width:980px; margin:0 auto; padding:26px 18px 54px}
    header{display:flex; align-items:flex-start; justify-content:space-between; gap:14px; flex-wrap:wrap; margin-bottom:14px}
    .brand{display:flex; gap:14px; align-items:center}

    /* âœ… LOGO z gÅ‚Ã³wnego folderu */
    .logo{
      height:56px;
      width:auto;
      display:block;
      flex:0 0 auto;
      filter: drop-shadow(0 10px 24px rgba(0,0,0,.45));
    }

    h1{margin:0; font-size:24px; letter-spacing:.2px}
    .sub{margin:6px 0 0 0; color:var(--muted); font-size:13px; line-height:1.35}

    .topbar{display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap; margin:14px 0}
    .pill{
      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      padding:8px 10px;
      border-radius:999px;
      color:var(--muted2);
      font-size:12px;
      box-shadow: var(--shadow);
      white-space:nowrap;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn{
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:8px 10px;
      border-radius:12px;
      cursor:pointer;
      box-shadow: var(--shadow);
      font-size:12px;
    }
    .btn.active{ border-color: rgba(125,211,252,.55); background: rgba(125,211,252,.10); }

    .panel{
      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:16px;
    }
    .date{color:var(--muted2); font-size:13px; margin-top:4px}
    .lead{margin:12px 0 0 0; font-size:15px; line-height:1.5; color:rgba(234,240,255,.92)}

    .sec{margin-top:18px}
    .sec h2{
      margin:0 0 8px 0; font-size:16px;
      display:flex; align-items:center; gap:10px;
    }
    .icon{
      width:28px; height:28px;
      display:inline-flex; align-items:center; justify-content:center;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      font-size:16px;
    }
    .text{margin:0; color:var(--muted); line-height:1.55; font-size:14px}
    .list{margin:10px 0 0 18px; color:var(--muted); font-size:14px; line-height:1.55}

    .archive{
      margin-top:16px;
      border-top:1px solid rgba(255,255,255,.10);
      padding-top:14px;
    }
    .archive h3{margin:0 0 10px 0; font-size:14px; color:rgba(234,240,255,.9)}
    .archgrid{display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:10px}
    .architem{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius:14px;
      padding:12px;
      cursor:pointer;
      transition: transform .08s ease, border-color .08s ease;
    }
    .architem:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18); }
    .archmeta{display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; color:var(--muted2); font-size:12px; margin-top:6px}

    .footer{
      margin-top:20px;
      padding-top:14px;
      border-top:1px solid rgba(255,255,255,.10);
      font-size:12px;
      color:rgba(234,240,255,.55);
    }
    code{background: rgba(255,255,255,.06); padding:2px 6px; border-radius:10px; border:1px solid rgba(255,255,255,.10)}
    .error{
      margin-top:14px;
      border:1px solid rgba(255,120,120,.25);
      background: rgba(255,120,120,.08);
      padding:12px 14px; border-radius:14px; color:rgba(255,220,220,.92);
      box-shadow: var(--shadow);
      font-size:13px;
    }
  </style>
</head>

<body>
<div class="wrap">
  <header>
    <div class="brand">
      <!-- âœ… logo.png z gÅ‚Ã³wnego folderu -->
      <img src="logo.png" alt="ACE Group" class="logo">
      <div>
        <h1>ACE â€“ Poranny Skan Rynku</h1>
        <p class="sub">PrzeÅ‚Ä…cz PL/EN. Archiwum pokazuje ostatnie 10 porannych skanÃ³w.</p>
      </div>
    </div>

    <div class="pill" id="asof">Aktualizacja: â€”</div>
  </header>

  <div class="topbar">
    <div>
      <button class="btn active" id="btnPL" type="button">PL</button>
      <button class="btn" id="btnEN" type="button">EN</button>
    </div>
    <div class="pill">Å¹rÃ³dÅ‚o: <strong>ACE Group</strong></div>
  </div>

  <section class="panel" id="main"></section>
  <div id="err" class="error" style="display:none"></div>

  <section class="panel archive" id="archive"></section>

  <div class="footer">
    Edycja codzienna: dopisz nowy wpis na gÃ³rze w <code>scan.json</code> (PL + EN). Panel sam to wczyta.
  </div>
</div>

<script>
  const DATA_URL = "scan.json?ts=" + Date.now();
  let LANG = "pl";
  let ITEMS = [];
  let ACTIVE_ID = null;

  function setLang(lang){
    LANG = lang;
    document.getElementById("btnPL").classList.toggle("active", lang==="pl");
    document.getElementById("btnEN").classList.toggle("active", lang==="en");
    render();
  }

  function fmtDatePL(iso){
    if(!iso) return "â€”";
    const p = iso.split("-");
    if(p.length!==3) return iso;
    return `${p[2]}.${p[1]}.${p[0]}`;
  }

  function esc(s){
    return (s||"").toString()
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;");
  }

  function renderMain(item){
    const t = item[LANG] || {};
    const dateLine = `${fmtDatePL(item.date)} | ${item.time || "â€”"}`;
    const title = t.title || "ACE â€“ Poranny Skan Rynku";
    const lead = t.lead || "";

    const fx = t.fx || "";
    const agri = t.agri || "";
    const focus = Array.isArray(t.focus) ? t.focus : [];

    document.getElementById("main").innerHTML = `
      <div>
        <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:12px; flex-wrap:wrap">
          <div>
            <div style="font-weight:700; font-size:18px">${esc(title)}</div>
            <div class="date">${esc(dateLine)}</div>
          </div>
          <div class="pill">ID: <strong>${esc(item.id)}</strong></div>
        </div>

        <p class="lead">${esc(lead)}</p>

        <div class="sec">
          <h2><span class="icon">ðŸ’µ</span> FX / Makro</h2>
          <p class="text">${esc(fx)}</p>
        </div>

        <div class="sec">
          <h2><span class="icon">ðŸŒ¾</span> ZboÅ¼a i oleiste</h2>
          <p class="text">${esc(agri)}</p>
        </div>

        <div class="sec">
          <h2><span class="icon">ðŸŽ¯</span> Na co zwrÃ³ciÄ‡ uwagÄ™ dziÅ›</h2>
          ${focus.length ? `<ul class="list">${focus.map(x=>`<li>${esc(x)}</li>`).join("")}</ul>` : `<p class="text muted">â€”</p>`}
        </div>
      </div>
    `;
  }

  function renderArchive(){
    const box = document.getElementById("archive");
    const t = (LANG==="pl")
      ? {h:"Archiwum (ostatnie 10)", open:"OtwÃ³rz"}
      : {h:"Archive (last 10)", open:"Open"};

    box.innerHTML = `
      <h3>${t.h}</h3>
      <div class="archgrid">
        ${ITEMS.slice(0,10).map(it => {
          const tt = it[LANG] || {};
          return `
            <div class="architem" data-id="${esc(it.id)}">
              <div style="font-weight:700">${esc(tt.title || "Poranny Skan")}</div>
              <div class="archmeta">
                <span>${fmtDatePL(it.date)} | ${it.time || "â€”"}</span>
                <span>${t.open} â†’</span>
              </div>
            </div>
          `;
        }).join("")}
      </div>
    `;

    box.querySelectorAll(".architem").forEach(el=>{
      el.addEventListener("click",()=>{
        ACTIVE_ID = el.dataset.id;
        render();
      });
    });
  }

  function render(){
    const current = ITEMS.find(x => x.id === ACTIVE_ID) || ITEMS[0];
    if(!current) return;
    ACTIVE_ID = current.id;
    renderMain(current);
    renderArchive();
  }

  async function init(){
    try{
      const res = await fetch(DATA_URL, {cache:"no-store"});
      if(!res.ok) throw new Error("Nie mogÄ™ wczytaÄ‡ scan.json");
      const data = await res.json();
      ITEMS = Array.isArray(data.items) ? data.items : [];
      document.getElementById("asof").textContent =
        "Aktualizacja: " + new Date().toLocaleString("pl-PL");
      render();
    } catch(e){
      const err = document.getElementById("err");
      err.style.display = "block";
      err.textContent = "BÅ‚Ä…d: " + e.message;
    }
  }

  document.getElementById("btnPL").onclick = ()=>setLang("pl");
  document.getElementById("btnEN").onclick = ()=>setLang("en");
  init();
</script>
</body>
</html>
